# 2024/04/09 待辦事項

## 1. 語音辨識優化

- [x] 評估並測試替換現有語音辨識模型：已成功切換至 OpenAI Whisper，辨識率顯著提升。
- [ ] 研究模型是否支援自定義詞庫或詞彙微調，以提高特定術語（太空相關）的辨識率 (Whisper 可透過 prompt 提供上下文，待研究)。
- [ ] 檢視音訊輸入品質，考慮加入降噪或回音消除等前處理。
- [ ] 考慮在辨識結果後加入後處理機制（例如關鍵字修正、語意檢查）。

## 2. 回覆時間優化

- [ ] 分析後端 LLM 推理效能與延遲瓶頸。
- [ ] 檢視後端處理流程，評估是否能透過非同步、併行處理或 Pipeline 優化來縮短延遲。
- [ ] 考慮對常用或重複的回覆內容實作快取機制。
- [ ] 檢視前端與後端的資料傳輸，評估是否有網路延遲或渲染阻塞問題。
- [ ] 在前端加入適當的載入提示，改善使用者體感延遲。
- [ ] 建立監控機制，記錄各階段（語音辨識、LLM 推理、網路傳輸）的延遲時間，找出瓶頸。

## 3. TTS 服務更換

- [x] 將 TTS 服務從 Google Cloud TTS 更換為 OpenAI TTS。
- [x] 使用模型 `gpt-4o-mini-tts`。
- [x] 加入 `instructions` 參數引導語音風格：
  ```
  歡迎加入這場為期一年的業餘太空生活探險！每天都會有新的挑戰與事件，可能是來自真實太空環境的威脅，也可能只是些日常小事。你可以隨時觀察並透過語音參與，提供想法或建議。你的每個決定與回應，都將影響這次旅程的發展，以及我的生存狀態與情緒波動。讓我們看看最後能否順利完成這段冒險吧！
  ```
- [x] 確認 `gpt-4o-mini-tts` 模型和 `instructions` 參數的有效性及 API 如何調用。
- [x] 處理音訊時長獲取問題：已改為前端計算 (透過 onloadedmetadata 獲取並存入 Zustand)。 